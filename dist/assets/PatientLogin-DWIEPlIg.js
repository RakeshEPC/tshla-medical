import{u as y,r as d,j as e,b as A}from"./index-CFDQeSWK.js";import{patientService as N}from"./patient.service-Cq6NQU3g.js";function V(){const n=y(),[c,u]=d.useState(!1),[i,x]=d.useState("ava"),[s,h]=d.useState({avaId:"",email:""}),[r,o]=d.useState({}),[g,b]=d.useState(!1),f=t=>{let a=t.toUpperCase().replace(/[^A-Z0-9]/g,"");if(!a.startsWith("AVA")&&a.length>0&&/^\d/.test(a)&&(a="AVA"+a),a.startsWith("AVA")){const l=a.substring(3);if(l.length>=3){const m=`AVA ${l.substring(0,3)}`;return l.length>3?m+"-"+l.substring(3,6):m}return a.replace("AVA","AVA ")}return t},v=t=>{const a=f(t.target.value);h({...s,avaId:a}),o({})},p=()=>{const t={};return i==="ava"?s.avaId?/^AVA \d{3}-\d{3}$/.test(s.avaId)||(t.avaId="Please enter a valid AVA ID (AVA ###-###)"):t.avaId="AVA ID is required":s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(t.email="Please enter a valid email"):t.email="Email is required",o(t),Object.keys(t).length===0},j=async t=>{if(t.preventDefault(),!!p()){u(!0);try{const a=i==="ava"?{avaId:s.avaId}:{email:s.email},{patient:l,session:m}=await N.loginWithAvaId(a);l.programs.pumpdrive?.enrolled&&!l.programs.pumpdrive?.finalRecommendations?n("/pumpdrive"):(l.programs.weightloss?.enrolled,n("/patient/dashboard"))}catch{A("PatientLogin","Error message",{}),o({submit:i==="ava"?"Invalid AVA ID. Please check and try again.":"Invalid email or account not found."})}finally{u(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-green-600 rounded-full mb-4",children:e.jsx("span",{className:"text-white text-3xl font-bold",children:"AVA"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Log in to continue your health journey"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-xl p-1 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{x("ava"),o({})},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${i==="ava"?"bg-white shadow-sm text-blue-600":"text-gray-600"}`,children:"AVA ID"}),e.jsx("button",{type:"button",onClick:()=>{x("email"),o({})},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${i==="email"?"bg-white shadow-sm text-blue-600":"text-gray-600"}`,children:"Email"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i==="ava"?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your AVA ID"}),e.jsx("input",{type:"text",value:s.avaId,onChange:v,placeholder:"AVA 123-456",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-lg ${r.avaId?"border-red-500":"border-gray-300"}`,maxLength:11}),r.avaId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.avaId}),e.jsx("button",{type:"button",onClick:()=>b(!g),className:"text-sm text-blue-600 hover:text-blue-700 mt-2",children:"What's my AVA ID?"}),g&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg text-sm",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:"Your AVA ID was provided when you registered. It looks like:"}),e.jsx("p",{className:"font-mono font-bold text-blue-600 text-center text-lg",children:"AVA 123-456"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Check your welcome email for your unique AVA ID."})]})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:s.email,onChange:t=>{h({...s,email:t.target.value}),o({})},placeholder:"john.smith@email.com",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent ${r.email?"border-red-500":"border-gray-300"}`}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]})}),r.submit&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-sm",children:r.submit}),e.jsx("button",{type:"submit",disabled:c,className:`w-full py-4 rounded-xl font-semibold text-white transition-all ${c?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 transform hover:scale-[1.02]"}`,children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Log In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Don't have an account?"}),e.jsx("button",{type:"button",onClick:()=>n("/patient-register"),className:"w-full py-3 border-2 border-blue-600 text-blue-600 rounded-xl font-semibold hover:bg-blue-50 transition-colors",children:"Create New Account"})]})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[e.jsx("button",{type:"button",onClick:()=>n("/forgot-ava-id"),className:"hover:text-gray-700",children:"Forgot your AVA ID?"}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("button",{type:"button",onClick:()=>n("/contact"),className:"hover:text-gray-700",children:"Contact Support"})]})]})})}export{V as default};
//# sourceMappingURL=PatientLogin-DWIEPlIg.js.map
