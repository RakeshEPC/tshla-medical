import{r as t,j as e}from"./index-CFDQeSWK.js";import{a as g}from"./accountCreation.service-Dg_EYr6M.js";import"./___vite-browser-external_commonjs-proxy-BgZhqs3U.js";function C(){const[a,u]=t.useState([]),[l,c]=t.useState(null),[d,o]=t.useState(""),[w,x]=t.useState(!1),[r,b]=t.useState(""),[m,h]=t.useState("");t.useEffect(()=>{n()},[]);const n=()=>{const s=g.getAllAccounts();u(s)},j=async s=>{const i=await g.resetPassword(s.email);i&&(o(i),c(s),x(!0),n())},p=(s,i)=>{navigator.clipboard.writeText(s),h(i),setTimeout(()=>h(""),2e3)},N=a.filter(s=>s.email.toLowerCase().includes(r.toLowerCase())||s.firstName.toLowerCase().includes(r.toLowerCase())||s.lastName.toLowerCase().includes(r.toLowerCase())||s.practice.toLowerCase().includes(r.toLowerCase())),y=s=>s.isActive?s.requiresPasswordChange?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700",children:"Password Reset Required"}):s.lastLogin?e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Active"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-700",children:"Never Logged In"}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-700",children:"Inactive"});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Account Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage doctor accounts and reset passwords"})]}),e.jsx("button",{onClick:()=>window.location.href="/admin/create-accounts",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Create New Accounts"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by name, email, or practice...",value:r,onChange:s=>b(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400",children:"ðŸ”"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Accounts"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.filter(s=>s.isActive&&!s.requiresPasswordChange).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:a.filter(s=>s.requiresPasswordChange).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Need Password Reset"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-600",children:a.filter(s=>!s.lastLogin).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Never Logged In"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Practice"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.practice})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Username: ",s.username]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(s)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.lastLogin?new Date(s.lastLogin).toLocaleDateString():"Never"}),s.passwordChangedAt&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Password changed: ",new Date(s.passwordChangedAt).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(s),className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"Reset Password"}),e.jsx("button",{onClick:()=>{s.isActive=!s.isActive,n()},className:`text-sm font-medium ${s.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:s.isActive?"Deactivate":"Activate"})]})})]},s.id))})]})}),w&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Password Reset Successful"}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Password has been reset for:"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[l.firstName," ",l.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"New Temporary Password:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded px-3 py-2 border",children:[e.jsx("code",{className:"text-lg font-mono text-blue-600",children:d}),e.jsx("button",{onClick:()=>p(d,"reset-password"),className:"text-gray-500 hover:text-gray-700",children:m==="reset-password"?"âœ“":"ðŸ“‹"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"User will be required to change this on next login"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("p",{className:"mb-2",children:"ðŸ“§ Send this information to the user:"}),e.jsx("div",{className:"bg-gray-50 rounded p-3 text-xs",children:e.jsx("button",{onClick:()=>{const s=`Your TSHLA Medical account password has been reset.

Temporary Password: ${d}

Please login at https://www.tshla.ai/login and you will be prompted to create a new password.

If you did not request this reset, please contact support immediately.`;p(s,"email-template")},className:"text-blue-600 hover:text-blue-700 font-medium",children:m==="email-template"?"Copied!":"Copy Email Template"})})]}),e.jsx("button",{onClick:()=>{x(!1),c(null),o("")},className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"ðŸ“Œ Account Management Information"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:"â€¢ All passwords are stored as secure bcrypt hashes in the database"}),e.jsx("li",{children:"â€¢ Temporary passwords use format: [4-letter word][4 digits] (e.g., Care1234)"}),e.jsx("li",{children:"â€¢ Users are required to change temporary passwords on first login"}),e.jsx("li",{children:"â€¢ Password history is maintained to prevent reuse of last 5 passwords"}),e.jsx("li",{children:"â€¢ New passwords must be at least 8 characters with mixed case and numbers"}),e.jsx("li",{children:"â€¢ All account data persists in browser localStorage (production would use real database)"})]})]})]})})}export{C as default};
//# sourceMappingURL=AdminAccountManagement-B7LMX0tQ.js.map
