import{i as L,u as C,r as i,b as k,j as e}from"./index-JAW6HvUl.js";import{A as j}from"./arrow-left-BosNFyyn.js";import{P as A}from"./printer-J-epz17_.js";import{D as E}from"./download-DxAqtIil.js";import{M as O}from"./mail-C0LlR0Uw.js";function G(){const{visitId:x}=L(),p=C(),N=i.useRef(null),[s,u]=i.useState(null),[f,o]=i.useState(!0),[m,y]=i.useState("full"),[h,v]=i.useState(!0),[c,w]=i.useState("normal");i.useEffect(()=>{S()},[x]);const S=async()=>{const t=localStorage.getItem("last-visit-data"),r=localStorage.getItem("last-patient-data");if(t)try{const l=JSON.parse(t),a=r?JSON.parse(r):null,n={id:x||"1",patientName:a?.name||l.patientName||"Patient Name",patientDOB:a?.dob||"1980-01-01",patientMRN:a?.mrn||l.patientMRN||"MRN001",visitDate:l.visitDate||new Date().toISOString(),visitType:l.visitType||"Clinical Visit",provider:localStorage.getItem("doctor_name")||"Dr. Provider",processedNote:l.processedNote||l.note||"",rawTranscript:l.transcript||"",template:l.template||"",medications:a?.medications?.map(d=>`${d.name} ${d.dosage} - ${d.frequency}`)||[],allergies:a?.allergies||[],diagnoses:a?.diagnosis||[],vitals:a?.vitalSigns||{bp:"120/80",pulse:"72",temp:"98.6°F",resp:"16",o2sat:"98%",weight:"150 lbs",height:`5'8"`},followUp:l.followUp||"As needed"};u(n),o(!1)}catch{k("PrintNotePage","Error message",{}),o(!1)}else o(!1)},D=()=>{window.print()},P=()=>{alert("PDF download functionality would be implemented here")},I=()=>{alert("Email functionality would be implemented here")},T=t=>{const r={},l=t.split(`
`);let a="",n=[];return l.forEach(d=>{const b=d.match(/^([A-Z\s]+):$/);b?(a&&(r[a]=n.join(`
`).trim()),a=b[1],n=[]):n.push(d)}),a&&(r[a]=n.join(`
`).trim()),r};if(f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!s)return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"No note data found"}),e.jsxs("button",{onClick:()=>p(-1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Go Back"]})]});const g=T(s.processedNote);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("style",{children:`
        @media print {
          @page {
            size: letter;
            margin: 0.75in;
          }
          
          body {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
          }
          
          .print\\:hidden {
            display: none !important;
          }
          
          .print\\:block {
            display: block !important;
          }
          
          .print\\:break-after-page {
            page-break-after: always;
          }
          
          .print\\:font-serif {
            font-family: 'Times New Roman', Times, serif !important;
          }
          
          .text-${c} {
            ${c==="small"?"font-size: 11pt !important;":c==="large"?"font-size: 14pt !important;":"font-size: 12pt !important;"}
          }
        }
      `}),e.jsx("div",{className:"print:hidden bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>p(-1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(j,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Print Clinical Note"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("select",{value:c,onChange:t=>w(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"small",children:"Small Text"}),e.jsx("option",{value:"normal",children:"Normal Text"}),e.jsx("option",{value:"large",children:"Large Text"})]}),e.jsxs("select",{value:m,onChange:t=>y(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"full",children:"Full Note"}),e.jsx("option",{value:"summary",children:"Summary Only"}),e.jsx("option",{value:"patient",children:"Patient Copy"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:t=>v(t.target.checked),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Letterhead"})]}),e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Print"]}),e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"PDF"]}),e.jsxs("button",{onClick:I,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5"}),"Email"]})]})]})})}),e.jsx("div",{className:`max-w-4xl mx-auto p-8 bg-white print:p-0 print:max-w-full text-${c}`,ref:N,children:e.jsxs("div",{className:"print:font-serif",children:[h&&e.jsx("div",{className:"mb-8 pb-6 border-b-2 border-blue-600 print:mb-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700 mb-2",children:"TSHLA Medical Center"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Excellence in Healthcare"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx("p",{children:"123 Medical Plaza, Suite 100"}),e.jsx("p",{children:"San Francisco, CA 94105"}),e.jsx("p",{children:"Phone: (415) 555-0100 | Fax: (415) 555-0101"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("img",{src:"/logo.png",alt:"TSHLA",className:"h-16 w-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"NPI: 1234567890"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tax ID: 12-3456789"})]})]})}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg print:bg-gray-50 print:border print:border-gray-300",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg mb-2 text-blue-900",children:"Patient Information"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:["Name: ",s.patientName]}),e.jsxs("p",{className:"text-gray-700",children:["DOB: ",new Date(s.patientDOB).toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:["MRN: ",s.patientMRN]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"font-bold text-lg mb-2 text-blue-900",children:"Visit Details"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:["Date: ",new Date(s.visitDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-700",children:["Type: ",s.visitType]}),e.jsxs("p",{className:"text-gray-700",children:["Provider: ",s.provider]})]})]})}),s.allergies&&s.allergies.length>0&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-lg print:border-red-500",children:e.jsxs("p",{className:"font-bold text-red-800 text-lg",children:["⚠️ ALLERGIES: ",s.allergies.join(", ")]})}),s.vitals&&m==="full"&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:border print:border-gray-300",children:[e.jsx("h2",{className:"text-lg font-bold mb-3 text-gray-900 border-b pb-2",children:"VITAL SIGNS"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"BP:"})," ",s.vitals.bp]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Pulse:"})," ",s.vitals.pulse]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Temp:"})," ",s.vitals.temp]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Resp:"})," ",s.vitals.resp]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"O2 Sat:"})," ",s.vitals.o2sat]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Weight:"})," ",s.vitals.weight]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 border-b-2 border-blue-600 pb-2",children:"CLINICAL NOTE"}),Object.keys(g).length>0?Object.entries(g).map(([t,r])=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-blue-800",children:t}),e.jsx("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap pl-4",children:r})]},t)):e.jsx("div",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.processedNote})]}),s.medications&&s.medications.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg print:border print:border-gray-300",children:[e.jsx("h2",{className:"text-lg font-bold mb-3 text-gray-900 border-b pb-2",children:"CURRENT MEDICATIONS"}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.medications.map((t,r)=>e.jsx("li",{className:"ml-2",children:t},r))})]}),s.diagnoses&&s.diagnoses.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg print:border print:border-gray-300",children:[e.jsx("h2",{className:"text-lg font-bold mb-3 text-gray-900 border-b pb-2",children:"DIAGNOSES"}),e.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.diagnoses.map((t,r)=>e.jsx("li",{className:"ml-2",children:t},r))})]}),s.followUp&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg print:border print:border-gray-300",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-gray-900",children:"FOLLOW-UP"}),e.jsx("p",{className:"text-gray-700",children:s.followUp})]}),m==="full"&&s.rawTranscript&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:border print:border-gray-300 print:break-after-page",children:[e.jsx("h2",{className:"text-lg font-bold mb-3 text-gray-900 border-b pb-2",children:"ORIGINAL TRANSCRIPT"}),e.jsx("p",{className:"text-gray-600 text-sm italic whitespace-pre-wrap",children:s.rawTranscript})]}),e.jsx("div",{className:"mt-12 pt-6 border-t-2 border-gray-400",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Provider Signature"}),e.jsx("div",{className:"border-b-2 border-gray-400 h-16 mb-2"}),e.jsx("p",{className:"font-semibold",children:s.provider}),e.jsx("p",{className:"text-sm text-gray-600",children:"License #: CA123456"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",new Date().toLocaleDateString()]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Patient Acknowledgment"}),e.jsx("div",{className:"border-b-2 border-gray-400 h-16 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Patient/Guardian Signature"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Date: _______________"})]})})]})}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-300 text-center print:mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"This document contains confidential medical information protected under HIPAA."}),e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Unauthorized disclosure is prohibited by law."}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[e.jsxs("span",{children:["Generated: ",new Date().toLocaleString()]}),e.jsxs("span",{children:["Document ID: ",s.id,"-",Date.now()]}),e.jsx("span",{children:"Page 1 of 1"})]})]})]})})]})}export{G as default};
//# sourceMappingURL=PrintNotePage-DFpr6Oxy.js.map
