import{c as j,u as E,e as S,r as u,j as e,b as T}from"./index-CFDQeSWK.js";import{d as p}from"./doctorProfile.service-CDoI-bQ3.js";import{A as k}from"./arrow-left-y79zHQa3.js";import{D as I}from"./download-FANRrGx6.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],R=j("file-json",O);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],g=j("upload",$);function J(){const f=E(),l=S.getCurrentUser()?.name||"Dr. Smith",[x,a]=u.useState(""),[o,b]=u.useState(""),i=p.getTemplates(l.id),y=()=>{if(!(!o||!l))try{const t=p.exportTemplate(o,l.id),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`template-${o}-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(r),a("Template exported successfully!")}catch(t){a(`Export failed: ${t.message}`)}},N=()=>{try{const t={templates:i,exportedAt:new Date().toISOString(),doctorId:l.id},n=JSON.stringify(t,null,2),r=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(r),c=document.createElement("a");c.href=s,c.download=`all-templates-${l.id}-${new Date().toISOString().split("T")[0]}.json`,c.click(),URL.revokeObjectURL(s),a(`Exported ${i.length} templates successfully!`)}catch(t){a(`Export failed: ${t.message}`)}},v=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=n=>{const r=n.target.files?.[0];if(r){const s=new FileReader;s.onload=c=>{try{const d=c.target?.result,m=JSON.parse(d);if(m.templates&&Array.isArray(m.templates)){let h=0;m.templates.forEach(w=>{try{p.importTemplate(JSON.stringify(w),l.id),h++}catch{T("TemplateImportExport","Error message",{})}}),a(`Imported ${h} of ${m.templates.length} templates successfully!`)}else p.importTemplate(d,l.id),a("Template imported successfully!");setTimeout(()=>window.location.reload(),1500)}catch(d){a(`Import failed: ${d.message}`)}},s.readAsText(r)}},t.click()};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>f("/doctor/templates"),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg transition",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Import/Export Templates"})]})})})}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(I,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Export Templates"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Single Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:o,onChange:t=>b(t.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a template"}),i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{onClick:y,disabled:!o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:"Export"})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:N,className:"w-full px-4 py-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition flex items-center justify-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),"Export All Templates (",i.length,")"]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(g,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Import Templates"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Import templates from a JSON file. You can import a single template or multiple templates at once."}),e.jsxs("button",{onClick:v,className:"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition flex items-center justify-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Choose File to Import"]})]})]}),x&&e.jsx("div",{className:`p-4 rounded-lg ${x.includes("failed")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:x}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"How to use Import/Export"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Export Single:"})," Select a template and export it as a JSON file"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Export All:"})," Export all your templates in a single file"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Import:"})," Upload a JSON file containing one or more templates"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Share:"})," Share exported templates with colleagues"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Backup:"})," Keep backups of your templates"]})]})]})]})]})}export{J as default};
//# sourceMappingURL=TemplateImportExport-C4MeACKu.js.map
