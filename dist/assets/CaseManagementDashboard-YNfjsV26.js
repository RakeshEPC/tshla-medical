import{u as Q,r as n,e as D,l as V,b as G,j as e}from"./index-JAW6HvUl.js";function te(){const r=Q(),[l]=n.useState(D.getCurrentUser()),[a,C]=n.useState("cases"),[s,A]=n.useState(null),[I,o]=n.useState(!1),[c,P]=n.useState([]),[g,k]=n.useState([]),[f,R]=n.useState([]),[j,O]=n.useState([]),[q,b]=n.useState(!0),[d,M]=n.useState("all"),[m,T]=n.useState("all"),[i,K]=n.useState("all"),[x,L]=n.useState("all");n.useEffect(()=>{if(!l){r("/login");return}$()},[l,r]);const $=async()=>{b(!0);try{const t="http://localhost:9006/api/dashboard",N=await(await fetch(`${t}/communications`)).json(),h=N.success?N.data:[],F=h.length>0?h:[{id:"1",call_sid:"CA_sample_001",communication_type:"voice",direction:"inbound",from_number:"+15551234567",to_number:"+18324027671",raw_transcript:"Hi, I need to schedule an appointment with Dr. Smith for next Tuesday around 2 PM. This is John Doe.",ai_summary:"Patient John Doe requesting appointment with Dr. Smith for Tuesday 2 PM",status:"processed",confidence_score:.92,needs_review:!1,duration_seconds:120,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],J=[{id:"1",communication_log_id:"1",patient_name:"John Doe",patient_phone:"+15551234567",requested_date:new Date(Date.now()+1440*60*1e3).toISOString().split("T")[0],requested_time:"14:00",flexible_scheduling:!1,appointment_type:"Follow-up",reason_for_visit:"Routine check-up",urgency_level:"routine",preferred_doctor:"Dr. Smith",status:"extracted",confidence_score:.89,created_at:new Date().toISOString()}],U=[{id:"1",case_number:`CASE-${new Date().toISOString().slice(0,10).replace(/-/g,"")}-0001`,case_type:"appointment_request",title:"Appointment Request - John Doe",description:"Patient John Doe called requesting appointment with Dr. Smith for Tuesday 2 PM",priority:"medium",patient_name:"John Doe",patient_phone:"+15551234567",status:"new",action_required:"Schedule appointment and confirm with patient",due_date:new Date(Date.now()+1440*60*1e3).toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",case_number:`CASE-${new Date().toISOString().slice(0,10).replace(/-/g,"")}-0002`,case_type:"prescription_refill",title:"Prescription Refill - Sarah Johnson",description:"Patient needs refill for metformin, running low",priority:"high",patient_name:"Sarah Johnson",patient_phone:"+15559876543",status:"assigned",assigned_to:"Clinical Team",assigned_department:"clinical",action_required:"Verify prescription history and process refill",due_date:new Date(Date.now()+720*60*1e3).toISOString(),created_at:new Date(Date.now()-7200*1e3).toISOString(),updated_at:new Date().toISOString()}],W=[{id:"1",staff_case_id:"1",action_type:"schedule_appointment",action_title:"Schedule appointment for John Doe",action_description:"Book Tuesday 2 PM slot with Dr. Smith",status:"pending",priority:"medium",due_date:new Date(Date.now()+1440*60*1e3).toISOString(),created_at:new Date().toISOString()},{id:"2",staff_case_id:"2",action_type:"send_prescription",action_title:"Process metformin refill",action_description:"Send prescription to pharmacy for Sarah Johnson",status:"pending",priority:"high",due_date:new Date(Date.now()+720*60*1e3).toISOString(),created_at:new Date().toISOString()}],w=await(await fetch(`${t}/appointments`)).json(),B=w.success?w.data:[],_=await(await fetch(`${t}/cases`)).json(),H=_.success?_.data:[],S=await(await fetch(`${t}/actions`)).json(),z=S.success?S.data:[];V("CaseManagementDashboard","Debug message",{}),P([...h,...F]),k([...B,...J]),R([...H,...U]),O([...z,...W])}catch{G("CaseManagementDashboard","Error message",{})}finally{b(!1)}},E=()=>{D.logout(),r("/login")},y=t=>{switch(t){case"emergency":return"bg-red-100 text-red-800 border-red-200";case"urgent":return"bg-orange-100 text-orange-800 border-orange-200";case"high":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=t=>{switch(t){case"new":return"bg-green-100 text-green-800";case"assigned":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"waiting_patient":return"bg-purple-100 text-purple-800";case"waiting_provider":return"bg-indigo-100 text-indigo-800";case"resolved":return"bg-gray-100 text-gray-800";case"closed":return"bg-gray-100 text-gray-500";default:return"bg-gray-100 text-gray-800"}},u=f.filter(t=>!(d!=="all"&&t.priority!==d||m!=="all"&&t.status!==m||x!=="all"&&t.case_type!==x||i!=="all"&&(i==="unassigned"&&t.assigned_to||i!=="unassigned"&&t.assigned_to!==i)));return q?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading case management data..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Case Management Dashboard"}),e.jsx("span",{className:"ml-4 text-sm text-gray-500",children:"AI-Powered Communication Intelligence"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",l?.name]}),e.jsx("button",{onClick:E,className:"text-sm text-red-600 hover:text-red-800",children:"Logout"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:c.length})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Communications"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Today"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:g.length})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Appointments"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Extracted"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:f.filter(t=>["new","assigned","in_progress"].includes(t.status)).length})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Cases"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Need Attention"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:j.filter(t=>t.status==="pending").length})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Actions"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"To Complete"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:[{id:"cases",name:"Staff Cases",count:u.length},{id:"communications",name:"Communications",count:c.length},{id:"appointments",name:"Appointments",count:g.length},{id:"actions",name:"Action Items",count:j.filter(t=>t.status==="pending").length}].map(t=>e.jsxs("button",{onClick:()=>C(t.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${a===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.name,t.count>0&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:t.count})]},t.id))})}),e.jsxs("div",{className:"p-6",children:[a==="cases"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("select",{value:d,onChange:t=>M(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),e.jsxs("select",{value:m,onChange:t=>T(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"waiting_patient",children:"Waiting Patient"}),e.jsx("option",{value:"waiting_provider",children:"Waiting Provider"}),e.jsx("option",{value:"resolved",children:"Resolved"})]}),e.jsxs("select",{value:x,onChange:t=>L(t.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"appointment_request",children:"Appointment Request"}),e.jsx("option",{value:"prescription_refill",children:"Prescription Refill"}),e.jsx("option",{value:"medical_question",children:"Medical Question"}),e.jsx("option",{value:"insurance_issue",children:"Insurance Issue"}),e.jsx("option",{value:"emergency",children:"Emergency"})]})]}),e.jsx("div",{className:"space-y-3",children:u.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No cases match the current filters"})}):u.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{A(t),o(!0)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500",children:t.case_number}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border ${y(t.priority)}`,children:t.priority.toUpperCase()}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${p(t.status)}`,children:t.status.replace("_"," ").toUpperCase()})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[t.patient_name&&e.jsxs("span",{children:["Patient: ",t.patient_name]}),t.assigned_to&&e.jsxs("span",{children:["Assigned: ",t.assigned_to]}),e.jsxs("span",{children:["Created: ",new Date(t.created_at).toLocaleString()]}),t.due_date&&e.jsxs("span",{children:["Due: ",new Date(t.due_date).toLocaleString()]})]})]}),e.jsx("button",{className:"ml-4 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",onClick:v=>{v.stopPropagation()},children:"Action"})]})},t.id))})]}),a==="communications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Communications"}),c.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${t.communication_type==="voice"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.communication_type.toUpperCase()}),e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[t.direction==="inbound"?"→":"←"," ",t.from_number]})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${p(t.status)}`,children:t.status.toUpperCase()})]}),t.ai_summary&&e.jsx("p",{className:"text-sm text-gray-800 mb-2 font-medium",children:t.ai_summary}),t.raw_transcript&&e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:['"',t.raw_transcript,'"']}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[t.confidence_score&&e.jsxs("span",{children:["Confidence: ",(t.confidence_score*100).toFixed(0),"%"]}),t.duration_seconds&&e.jsxs("span",{children:["Duration: ",t.duration_seconds,"s"]}),e.jsxs("span",{children:["Received: ",new Date(t.created_at).toLocaleString()]})]})]},t.id))]}),a==="appointments"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Extracted Appointments"}),e.jsx("p",{className:"text-gray-600",children:"Appointment extraction interface coming soon..."})]}),a==="actions"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pending Action Items"}),e.jsx("p",{className:"text-gray-600",children:"Action items management interface coming soon..."})]})]})]})]}),I&&s&&e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm font-mono text-gray-500",children:s.case_number})]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-sm font-medium border ${y(s.priority)}`,children:s.priority.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-sm font-medium ${p(s.status)}`,children:s.status.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded",children:s.description})]}),s.patient_name&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Information"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.patient_name}),s.patient_phone&&e.jsx("p",{className:"text-sm text-gray-600",children:s.patient_phone})]})]}),s.action_required&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Required"}),e.jsx("p",{className:"text-sm text-gray-900 bg-yellow-50 p-3 rounded border border-yellow-200",children:s.action_required})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Updated:"})," ",new Date(s.updated_at).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Close"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Assign to Me"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Mark Complete"})]})]})]})})]})}export{te as default};
//# sourceMappingURL=CaseManagementDashboard-YNfjsV26.js.map
