import{c as M,u as F,r,j as e}from"./index-JAW6HvUl.js";import{t as m}from"./templateStorage-1vthnjN2.js";import{A as L}from"./arrow-left-BosNFyyn.js";import{H as $}from"./house-BW3MfrtO.js";import{S as G}from"./save-Cu63E-N3.js";import{P as U}from"./plus-CENbmtft.js";import{C as B}from"./chevron-down-CkM-qfmA.js";import{T as O}from"./trash-2-Bmm5TizA.js";import{F as H}from"./file-text-4DKCZsvQ.js";import{S as Q}from"./star-IARMEOCM.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q=M("chevron-up",V);function se(){const h=F(),[c,d]=r.useState(""),[f,u]=r.useState(""),[i,n]=r.useState([{id:"section-1",title:"Chief Complaint",aiInstructions:"Extract the main reason for the visit",order:0}]),[b,w]=r.useState([]),[p,y]=r.useState(null),[o,g]=r.useState("");r.useEffect(()=>{x();const t=localStorage.getItem("defaultTemplateId");t&&g(t)},[]);const x=()=>{const s=m.getTemplates().filter(l=>!l.is_system_template);w(s)},v=t=>{localStorage.setItem("defaultTemplateId",t),g(t),alert("Default template set successfully!")},S=()=>{const t={id:`section-${Date.now()}`,title:"",aiInstructions:"",order:i.length};n([...i,t])},T=t=>{i.length>1&&n(i.filter(s=>s.id!==t))},j=(t,s,l)=>{n(i.map(a=>a.id===t?{...a,[s]:l}:a))},C=t=>{if(t===0)return;const s=[...i];[s[t],s[t-1]]=[s[t-1],s[t]],s.forEach((l,a)=>l.order=a),n(s)},I=t=>{if(t===i.length-1)return;const s=[...i];[s[t],s[t+1]]=[s[t+1],s[t]],s.forEach((l,a)=>l.order=a),n(s)},E=async()=>{if(!c||i.length===0){alert("Please provide a template name and at least one section");return}if(i.filter(a=>!a.title||!a.aiInstructions).length>0){alert("Please fill in all section titles and AI instructions");return}const s={};i.forEach(a=>{const P=a.title.toLowerCase().replace(/\s+/g,"_");s[P]={title:a.title,aiInstructions:a.aiInstructions,order:a.order}});const l={name:c,specialty:"General",template_type:"custom",sections:s,generalInstructions:f,is_shared:!1,is_system_template:!1};if(p)m.updateTemplate(p,l),alert("Template updated successfully!");else{const a=m.createTemplate(l);o||v(a.id),alert("Template created successfully!")}x(),N()},N=()=>{d(""),u(""),n([{id:"section-1",title:"Chief Complaint",aiInstructions:"Extract the main reason for the visit",order:0}]),y(null)},k=t=>{y(t.id),d(t.name),u(t.generalInstructions||"");const s=[];t.sections&&Object.entries(t.sections).forEach(([l,a])=>{typeof a=="object"&&a.title&&s.push({id:`section-${Date.now()}-${l}`,title:a.title,aiInstructions:a.aiInstructions||"",order:a.order||s.length})}),s.length>0&&(s.sort((l,a)=>l.order-a.order),n(s))},A=t=>{confirm("Are you sure you want to delete this template?")&&(m.deleteTemplate(t),o===t&&(localStorage.removeItem("defaultTemplateId"),g("")),x())},D=[{name:"SOAP Note",sections:[{title:"Subjective",ai:"Extract patient complaints, symptoms, and history"},{title:"Objective",ai:"Extract vital signs, physical exam findings, and lab results"},{title:"Assessment",ai:"Extract diagnoses and clinical impressions"},{title:"Plan",ai:"Extract treatment plan, medications, and follow-up"}]},{name:"Follow-up Visit",sections:[{title:"Chief Complaint",ai:"Extract the reason for follow-up"},{title:"Progress Since Last Visit",ai:"Extract improvements or worsening of symptoms"},{title:"Current Medications",ai:"List all current medications with doses"},{title:"Assessment & Plan",ai:"Extract assessment and treatment changes"}]},{name:"Medication Management",sections:[{title:"Current Medications",ai:"List all medications with doses and frequencies"},{title:"Medication Efficacy",ai:"Extract how well medications are working"},{title:"Side Effects",ai:"Extract any reported side effects"},{title:"Medication Changes",ai:"Extract all medication changes (start/stop/adjust)"}]}],_=t=>{d(t.name);const s=t.sections.map((l,a)=>({id:`section-${Date.now()}-${a}`,title:l.title,aiInstructions:l.ai,order:a}));n(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>h("/schedule"),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition",children:e.jsx(L,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Builder"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create custom medical note templates"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>h("/doctor"),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg flex items-center gap-2 transition",children:[e.jsx($,{className:"h-5 w-5"}),"Dashboard"]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition",children:"New Template"}),e.jsxs("button",{onClick:E,disabled:!c||i.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition",children:[e.jsx(G,{className:"h-5 w-5"}),p?"Update":"Save"," Template"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Template Name"}),e.jsx("input",{type:"text",value:c,onChange:t=>d(t.target.value),placeholder:"e.g., Diabetes Follow-up, Cardiology Consult",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]}),e.jsxs("div",{className:"mb-6 bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"General AI Instructions (Applied to Entire Template)"}),e.jsx("textarea",{value:f,onChange:t=>u(t.target.value),placeholder:"General instructions for AI processing that apply to all sections. For example: 'Use third person throughout. Be concise and professional. Include specific numeric values when mentioned. Avoid redundancy between sections.'",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"These instructions will be applied to the entire note processing, in addition to individual section instructions."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Template Sections"}),e.jsxs("button",{onClick:S,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 transition",children:[e.jsx(U,{className:"h-4 w-4"}),"Add Section"]})]}),i.map((t,s)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-gray-200 hover:border-blue-300 transition",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 mt-8",children:[e.jsx("button",{onClick:()=>C(s),disabled:s===0,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(s),disabled:s===i.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(B,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("input",{type:"text",value:t.title,onChange:l=>j(t.id,"title",l.target.value),placeholder:"Section title (e.g., Chief Complaint)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-medium"}),e.jsx("textarea",{value:t.aiInstructions,onChange:l=>j(t.id,"aiInstructions",l.target.value),placeholder:"AI instructions - What should be extracted for this section?",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),e.jsx("button",{onClick:()=>T(t.id),disabled:i.length===1,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(O,{className:"h-5 w-5"})})]})},t.id))]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Quick Start Templates"}),e.jsx("div",{className:"space-y-2",children:D.map(t=>e.jsxs("button",{onClick:()=>_(t),className:"w-full text-left px-4 py-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition",children:[e.jsx("div",{className:"font-medium text-blue-700",children:t.name}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[t.sections.length," sections"]})]},t.name))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"My Templates"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No custom templates yet"}):b.map(t=>e.jsxs("div",{className:"group bg-gray-50 hover:bg-gray-100 rounded-lg p-3 transition",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("button",{onClick:()=>k(t),className:"flex-1 text-left",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-800",children:t.name}),o===t.id&&e.jsx(Q,{className:"h-4 w-4 text-yellow-500 fill-current"})]})})}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:()=>v(t.id),className:`px-2 py-1 text-xs rounded ${o===t.id?"bg-yellow-100 text-yellow-700":"bg-gray-200 hover:bg-gray-300 text-gray-600"}`,children:o===t.id?"âœ“ Default":"Set Default"}),e.jsx("button",{onClick:()=>A(t.id),className:"px-2 py-1 bg-red-100 hover:bg-red-200 text-red-600 text-xs rounded",children:"Delete"})]})]},t.id))})]})]})]})]})})}export{se as default};
//# sourceMappingURL=SimplifiedTemplateBuilder-kDQxz3nS.js.map
