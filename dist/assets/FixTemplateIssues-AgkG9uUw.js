import{l as c,b as u,r as m,j as e}from"./index-JAW6HvUl.js";import{t as h}from"./templateStorage-1vthnjN2.js";function x(){c("App","Debug message",{});const t=h.getTemplates();let i=0;return t.forEach(n=>{let a=!1;const o={...n.sections};Object.entries(n.sections).forEach(([l,s])=>{typeof s=="object"&&s!==null&&s.title&&(s.title.startsWith("R:")||s.title.match(/^R\s*:/))&&(c("App","Debug message",{}),o[l]={...s,title:s.title.replace(/^R\s*:\s*/,"").trim()},a=!0,i++)}),a&&(c("App","Debug message",{}),h.updateTemplate(n.id,{sections:o}))}),i>0?(c("App","Debug message",{}),!0):(c("App","Debug message",{}),!1)}function g(){const t=h.getTemplates(),i=[];t.forEach(o=>{Object.entries(o.sections).forEach(([l,s])=>{typeof s=="object"&&s!==null&&s.title&&(s.title.startsWith("R:")||s.title.match(/^R\s*:/))&&(i.includes(o.name)||i.push(o.name))})});const n=i.length>0;let a="";return n?a=`The "R:" prefix in section titles can affect AI processing in several ways:
    
1. **Section Recognition**: The AI might not properly recognize section names like "R: Subjective" as "Subjective", leading to incorrect categorization.

2. **Content Extraction**: When the AI looks for specific sections (e.g., "Assessment"), it might miss sections labeled as "R: Assessment".

3. **Output Formatting**: The processed note will include the "R:" prefix in section headers, making the output look unprofessional.

4. **Template Matching**: The enhanced template processor expects standard section names. The "R:" prefix can cause the processor to skip these sections or process them incorrectly.

5. **Data Extraction**: Features like medication extraction or follow-up time parsing rely on finding the correct sections. The "R:" prefix disrupts this pattern matching.

Affected templates: ${i.join(", ")}

The "R:" likely came from copying/pasting or a formatting issue when creating the template. It should be removed for proper AI processing.`:a='No "R:" prefixes found in templates. The issue might be in the display or processing logic rather than the template data itself.',{hasRPrefix:n,affectedTemplates:i,explanation:a}}function f(){const t="medical_templates_v2";try{const i=localStorage.getItem(t);if(!i){c("App","Debug message",{});return}const n=JSON.parse(i);let a=0;const o=n.map(l=>{if(!l.sections||!Object.values(l.sections).some(p=>typeof p=="string"||typeof p=="object"&&p!==null&&(!p.title||!p.aiInstructions)))return l;c("App","Debug message",{}),a++;const d={};return Object.entries(l.sections).forEach(([p,r])=>{typeof r=="object"&&r!==null&&"title"in r&&"aiInstructions"in r&&r.title&&r.aiInstructions?d[p]=r:c("App","Debug message",{})}),{...l,sections:d}});a>0?(localStorage.setItem(t,JSON.stringify(o)),c("App","Debug message",{})):c("App","Debug message",{})}catch{u("App","Error message",{})}}function y(){const[t,i]=m.useState(null),[n,a]=m.useState(!1),[o,l]=m.useState(!1),s=()=>{const r=g();i(r)},d=()=>{x(),a(!0),setTimeout(()=>{s()},100)},p=()=>{f(),l(!0),setTimeout(()=>{s()},100)};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Template Issue Analyzer & Fixer"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Template Analysis"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:s,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600",children:'Analyze Templates for "R:" Issue'}),t&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t.hasRPrefix?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:[e.jsx("h3",{className:"font-semibold mb-2",children:t.hasRPrefix?"⚠️ Issues Found":"✅ No Issues Found"}),t.affectedTemplates.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Affected Templates:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:t.affectedTemplates.map(r=>e.jsx("li",{children:r},r))})]}),e.jsx("div",{className:"whitespace-pre-wrap text-sm text-gray-700",children:t.explanation})]}),t.hasRPrefix&&!n&&e.jsx("button",{onClick:d,className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:'Fix "R:" Prefixes in Templates'}),n&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:'✅ Fix applied successfully! The "R:" prefixes have been removed from section titles.'})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Other Template Fixes"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-3",children:"Fix corrupted template sections (removes invalid sections without proper title/aiInstructions):"}),e.jsx("button",{onClick:p,className:"bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600",children:"Fix Corrupted Templates"}),o&&e.jsx("div",{className:"mt-3 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:"✅ Corruption fix applied! Invalid template sections have been removed."})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"How This Affects AI Processing:"}),e.jsx("p",{className:"text-sm text-gray-700",children:`The "R:" prefix in section titles interferes with the AI's ability to:`}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm text-gray-700",children:[e.jsx("li",{children:"Properly categorize medical information into correct sections"}),e.jsx("li",{children:"Extract specific data like medications, labs, and follow-up times"}),e.jsx("li",{children:"Match dictated content with template section instructions"}),e.jsx("li",{children:"Generate clean, professional-looking clinical notes"})]}),e.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[e.jsx("strong",{children:"Answer to your question:"}),' Yes, the "R:" does mess up the AI processing. It causes the AI to misidentify sections and fail to apply the correct formatting rules.']})]})]})})}export{y as default};
//# sourceMappingURL=FixTemplateIssues-AgkG9uUw.js.map
