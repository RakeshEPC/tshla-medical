{"version":3,"file":"TemplateImportExport-DGaaKFIM.js","sources":["../../node_modules/lucide-react/dist/esm/icons/file-json.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../src/pages/TemplateImportExport.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.539.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\n    \"path\",\n    { d: \"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1\", key: \"1oajmo\" }\n  ],\n  [\n    \"path\",\n    { d: \"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1\", key: \"mpwhp6\" }\n  ]\n];\nconst FileJson = createLucideIcon(\"file-json\", __iconNode);\n\nexport { __iconNode, FileJson as default };\n//# sourceMappingURL=file-json.js.map\n","/**\n * @license lucide-react v0.539.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n];\nconst Upload = createLucideIcon(\"upload\", __iconNode);\n\nexport { __iconNode, Upload as default };\n//# sourceMappingURL=upload.js.map\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowLeft, Download, Upload, FileJson } from 'lucide-react';\nimport { doctorProfileService } from '../services/doctorProfile.service';\nimport { unifiedAuthService } from '../services/unifiedAuth.service';\nimport { logError, logWarn, logInfo, logDebug } from '../services/logger.service';\n\nexport default function TemplateImportExport() {\n  const navigate = useNavigate();\n  const currentDoctor = unifiedAuthService.getCurrentUser()?.name || 'Dr. Smith';\n  const [importResult, setImportResult] = useState<string>('');\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('');\n\n  const templates = currentDoctor ? doctorProfileService.getTemplates(currentDoctor.id) : [];\n\n  const handleExportTemplate = () => {\n    if (!selectedTemplate || !currentDoctor) return;\n\n    try {\n      const json = doctorProfileService.exportTemplate(selectedTemplate, currentDoctor.id);\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `template-${selectedTemplate}-${new Date().toISOString().split('T')[0]}.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n      setImportResult('Template exported successfully!');\n    } catch (error) {\n      setImportResult(`Export failed: ${error.message}`);\n    }\n  };\n\n  const handleExportAllTemplates = () => {\n    if (!currentDoctor) return;\n\n    try {\n      const allTemplates = {\n        templates: templates,\n        exportedAt: new Date().toISOString(),\n        doctorId: currentDoctor.id,\n      };\n\n      const json = JSON.stringify(allTemplates, null, 2);\n      const blob = new Blob([json], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `all-templates-${currentDoctor.id}-${new Date().toISOString().split('T')[0]}.json`;\n      a.click();\n      URL.revokeObjectURL(url);\n      setImportResult(`Exported ${templates.length} templates successfully!`);\n    } catch (error) {\n      setImportResult(`Export failed: ${error.message}`);\n    }\n  };\n\n  const handleImportTemplate = () => {\n    if (!currentDoctor) return;\n\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = e => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          try {\n            const content = e.target?.result as string;\n            const imported = JSON.parse(content);\n\n            // Check if it's a single template or multiple\n            if (imported.templates && Array.isArray(imported.templates)) {\n              // Multiple templates\n              let successCount = 0;\n              imported.templates.forEach((template: any) => {\n                try {\n                  doctorProfileService.importTemplate(JSON.stringify(template), currentDoctor.id);\n                  successCount++;\n                } catch (err) {\n                  logError('TemplateImportExport', 'Error message', {});\n                }\n              });\n              setImportResult(\n                `Imported ${successCount} of ${imported.templates.length} templates successfully!`\n              );\n            } else {\n              // Single template\n              doctorProfileService.importTemplate(content, currentDoctor.id);\n              setImportResult('Template imported successfully!');\n            }\n\n            // Refresh the page to show new templates\n            setTimeout(() => window.location.reload(), 1500);\n          } catch (error) {\n            setImportResult(`Import failed: ${error.message}`);\n          }\n        };\n        reader.readAsText(file);\n      }\n    };\n    input.click();\n  };\n\n  if (!currentDoctor) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">Please log in to access template import/export</p>\n          <button\n            onClick={() => navigate('/login')}\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n          >\n            Go to Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center\">\n              <button\n                onClick={() => navigate('/doctor/templates')}\n                className=\"mr-4 p-2 hover:bg-gray-100 rounded-lg transition\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n              </button>\n              <h1 className=\"text-xl font-semibold\">Import/Export Templates</h1>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-4xl mx-auto p-6\">\n        {/* Export Section */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <Download className=\"w-5 h-5 text-gray-600\" />\n            <h2 className=\"text-lg font-semibold\">Export Templates</h2>\n          </div>\n\n          <div className=\"space-y-4\">\n            {/* Export Single Template */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Export Single Template\n              </label>\n              <div className=\"flex gap-2\">\n                <select\n                  value={selectedTemplate}\n                  onChange={e => setSelectedTemplate(e.target.value)}\n                  className=\"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                >\n                  <option value=\"\">Select a template</option>\n                  {templates.map(template => (\n                    <option key={template.id} value={template.id}>\n                      {template.name}\n                    </option>\n                  ))}\n                </select>\n                <button\n                  onClick={handleExportTemplate}\n                  disabled={!selectedTemplate}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400\"\n                >\n                  Export\n                </button>\n              </div>\n            </div>\n\n            {/* Export All Templates */}\n            <div>\n              <button\n                onClick={handleExportAllTemplates}\n                className=\"w-full px-4 py-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition flex items-center justify-center gap-2\"\n              >\n                <FileJson className=\"w-5 h-5\" />\n                Export All Templates ({templates.length})\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Import Section */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <Upload className=\"w-5 h-5 text-gray-600\" />\n            <h2 className=\"text-lg font-semibold\">Import Templates</h2>\n          </div>\n\n          <div className=\"space-y-4\">\n            <p className=\"text-sm text-gray-600\">\n              Import templates from a JSON file. You can import a single template or multiple\n              templates at once.\n            </p>\n\n            <button\n              onClick={handleImportTemplate}\n              className=\"w-full px-4 py-3 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition flex items-center justify-center gap-2\"\n            >\n              <Upload className=\"w-5 h-5\" />\n              Choose File to Import\n            </button>\n          </div>\n        </div>\n\n        {/* Result Message */}\n        {importResult && (\n          <div\n            className={`p-4 rounded-lg ${\n              importResult.includes('failed')\n                ? 'bg-red-50 text-red-700'\n                : 'bg-green-50 text-green-700'\n            }`}\n          >\n            {importResult}\n          </div>\n        )}\n\n        {/* Instructions */}\n        <div className=\"bg-gray-50 rounded-lg p-6\">\n          <h3 className=\"font-semibold mb-2\">How to use Import/Export</h3>\n          <ul className=\"space-y-2 text-sm text-gray-600\">\n            <li>\n              • <strong>Export Single:</strong> Select a template and export it as a JSON file\n            </li>\n            <li>\n              • <strong>Export All:</strong> Export all your templates in a single file\n            </li>\n            <li>\n              • <strong>Import:</strong> Upload a JSON file containing one or more templates\n            </li>\n            <li>\n              • <strong>Share:</strong> Share exported templates with colleagues\n            </li>\n            <li>\n              • <strong>Backup:</strong> Keep backups of your templates\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["__iconNode","FileJson","createLucideIcon","Upload","TemplateImportExport","navigate","useNavigate","currentDoctor","unifiedAuthService","importResult","setImportResult","useState","selectedTemplate","setSelectedTemplate","templates","doctorProfileService","handleExportTemplate","json","blob","url","a","error","handleExportAllTemplates","allTemplates","handleImportTemplate","input","e","file","reader","content","imported","successCount","template","logError","jsxs","jsx","ArrowLeft","Download"],"mappings":"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","x_google_ignoreList":[0,1]}