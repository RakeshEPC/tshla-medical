import{u as P,i as L,r as o,j as e}from"./index-CFDQeSWK.js";function O(){const l=P(),{assessmentId:x}=L(),[c,j]=o.useState(""),[a,f]=o.useState(null),[d,y]=o.useState({}),[m,N]=o.useState([]),[h,b]=o.useState({}),[u,w]=o.useState([]),[S,p]=o.useState(!0);o.useEffect(()=>{k()},[x]);const k=async()=>{try{const s=sessionStorage.getItem("pumpDrivePatientName")||"";j(s||"Pump Drive Assessment");const t=sessionStorage.getItem("pumpDriveRecommendation");t&&f(JSON.parse(t));const i=sessionStorage.getItem("pumpDriveSliders");i&&y(JSON.parse(i));const n=sessionStorage.getItem("selectedPumpFeatures");n&&N(JSON.parse(n));const g=sessionStorage.getItem("pumpDriveClarifyingResponses");g&&b(JSON.parse(g));const v=sessionStorage.getItem("pumpDriveConversation");v&&w(JSON.parse(v)),p(!1)}catch(s){console.error("Error loading report data:",s),p(!1)}},D=()=>{window.print()},C=()=>{const s=document.documentElement.outerHTML,t=new Blob([s],{type:"text/html"}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=`pump-report-${c.replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},R=s=>({"Medtronic 780G":["Most aggressive blood sugar control - wake up with better numbers!","Swim up to 12 feet deep - no more missing pool parties!","AA batteries available everywhere - never worry about charging!","Large 300-unit capacity - fewer interruptions to your day!","Proven track record - thousands of happy users worldwide!"],"t:slim X2":["Smartphone-like touchscreen - so easy your kids could use it!","Multiple CGM options - freedom to choose what works for you!","Sleek, modern design - looks like a cool tech device!","Loaner program for travel - never stuck without backup!","Regular software updates - your pump gets better over time!"],"Tandem Mobi":["Smallest rechargeable pump ever - barely notice you're wearing it!","Apple Watch control - manage diabetes right from your wrist!","Ultra-discreet - fits anywhere, visible to no one!","Quick-release feature - perfect for sports and activities!","Modern tech that actually makes diabetes easier!"],"Omnipod 5":["Completely tubeless - total freedom of movement!","Waterproof design - swim, shower, exercise without worry!","No buttons to accidentally press - set it and forget it!","Automatic insulin delivery - like having a personal assistant!","Pod system means no pump to drop or break!"],"Beta Bionics iLet":["Revolutionary dual-hormone technology - glucagon AND insulin!","Just enter your weight - the simplest setup ever!","Learns your body automatically - gets smarter every day!","Handles both highs AND lows - complete diabetes management!","Future of diabetes care, available today!"],Twiist:["Incredibly lightweight at just 2 ounces - you'll forget it's there!","Apple Watch bolusing - control everything from your wrist!","Ultra-minimal design - maximum discretion!","Perfect for active lifestyles - built for movement!","Cutting-edge technology in the smallest package!"]})[s]||["Automated insulin delivery - freedom from constant management!","Better blood sugar control - feel your best every day!","Modern technology - diabetes care that actually helps!","Improved quality of life - more time for what matters!","Join thousands of happy pump users!"],A=()=>a?"topRecommendation"in a?{topChoice:{name:a.topRecommendation.name,score:a.topRecommendation.score,reasons:a.topRecommendation.pros||[]},alternatives:a.alternatives.map(s=>({name:s.name,score:s.score,reasons:[s.explanation]})),keyFactors:a.decisionSummary.userPriorities||[],personalizedInsights:a.detailedAnalysis}:a:null;if(S)return e.jsx("div",{className:"report-container",children:e.jsx("div",{className:"loading-message",children:"Loading your pump report..."})});const r=A();return r?e.jsxs("div",{className:"report-container",children:[e.jsxs("div",{className:"print-controls no-print",children:[e.jsx("button",{onClick:()=>l("/pumpdrive/results"),className:"back-button",children:"â† Back to Results"}),e.jsxs("div",{className:"print-actions",children:[e.jsx("button",{onClick:D,className:"print-button",children:"ðŸ–¨ï¸ Print Report"}),e.jsx("button",{onClick:C,className:"save-button",children:"ðŸ’¾ Save as HTML"})]})]}),e.jsxs("div",{className:"report-content",children:[e.jsx("header",{className:"report-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Your Perfect Pump Match"}),c&&e.jsxs("h2",{children:["For: ",c]}),e.jsxs("div",{className:"report-date",children:["Generated on ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})}),e.jsxs("section",{className:"preferences-section",children:[e.jsx("h2",{className:"section-title",children:"What You Told Us"}),Object.keys(d).length>0&&e.jsxs("div",{className:"preferences-group",children:[e.jsx("h3",{children:"Your Top Priorities:"}),e.jsx("ul",{className:"preferences-list",children:Object.entries(d).filter(([s,t])=>t>=7).map(([s,t])=>e.jsxs("li",{children:[s.replace(/([A-Z])/g," $1").trim(),": ",t,"/10"]},s))})]}),m.length>0&&e.jsxs("div",{className:"preferences-group",children:[e.jsx("h3",{children:"Features You Wanted:"}),e.jsx("ul",{className:"preferences-list",children:m.slice(0,5).map((s,t)=>e.jsx("li",{children:s.name||s.title||s||"Unknown feature"},t))})]})]}),e.jsx("div",{className:"page-break"}),e.jsxs("section",{className:"recommendation-section",children:[e.jsx("h2",{className:"section-title",children:"Your Perfect Match"}),e.jsxs("div",{className:"top-recommendation",children:[e.jsx("h3",{className:"pump-name",children:r.topChoice.name}),e.jsxs("div",{className:"match-score",children:["Match Score: ",r.topChoice.score,"/100"]}),e.jsxs("div",{className:"reasons-group",children:[e.jsx("h4",{children:"Why This Pump is Perfect for You:"}),e.jsx("ul",{className:"reasons-list",children:r.topChoice.reasons.slice(0,4).map((s,t)=>e.jsx("li",{children:s},t))})]})]}),r.alternatives&&r.alternatives.length>0&&e.jsxs("div",{className:"alternatives-section",children:[e.jsx("h4",{children:"Alternative Options:"}),r.alternatives.slice(0,2).map((s,t)=>e.jsxs("div",{className:"alternative-item",children:[e.jsx("strong",{children:s.name})," (Score: ",s.score,"/100)",s.reasons&&s.reasons.length>0&&e.jsx("p",{children:s.reasons[0]})]},t))]})]}),Object.keys(h).length>0&&e.jsxs("section",{className:"qa-section",children:[e.jsx("h2",{className:"section-title",children:"Clarifying Questions We Asked"}),Object.entries(h).map(([s,t],i)=>e.jsxs("div",{className:"qa-item",children:[e.jsxs("div",{className:"question",children:[e.jsx("strong",{children:"Q:"})," ",s]}),e.jsxs("div",{className:"answer",children:[e.jsx("strong",{children:"A:"})," ",t]})]},i))]}),u.length>0&&e.jsxs("section",{className:"qa-section",children:[e.jsx("h2",{className:"section-title",children:"Your Follow-up Questions & Our Full Answers"}),u.map((s,t)=>e.jsxs("div",{className:"qa-item",children:[e.jsxs("div",{className:"question",children:[e.jsx("strong",{children:"Q:"})," ",s.question]}),e.jsxs("div",{className:"answer",children:[e.jsx("strong",{children:"A:"})," ",s.answer]})]},t))]}),e.jsx("div",{className:"page-break"}),e.jsxs("section",{className:"benefits-section",children:[e.jsx("h2",{className:"section-title benefits-title",children:"Amazing Benefits Waiting for You"}),e.jsx("ul",{className:"benefits-list",children:R(r.topChoice.name).map((s,t)=>e.jsx("li",{className:"benefit-item",children:s},t))}),e.jsxs("div",{className:"encouragement",children:[e.jsx("p",{className:"ready-text",children:"Ready to transform your diabetes management?"}),e.jsx("p",{className:"share-text",children:"Share this report with your healthcare provider to get started!"})]})]}),e.jsx("footer",{className:"report-footer",children:e.jsxs("div",{className:"footer-content",children:[e.jsx("p",{children:"Generated by TSHLA Medical AI"}),e.jsx("p",{children:"For more information, visit www.tshla.ai"})]})})]})]}):e.jsx("div",{className:"report-container",children:e.jsxs("div",{className:"error-message",children:[e.jsx("h2",{children:"No Report Data Found"}),e.jsx("p",{children:"Please complete a pump assessment first."}),e.jsx("button",{onClick:()=>l("/pumpdrive"),className:"action-button",children:"Start Assessment"})]})})}export{O as default};
//# sourceMappingURL=PumpDriveHTMLReport-Cd8ccnwD.js.map
