import{u as _,r as u,b as G,j as e}from"./index-JAW6HvUl.js";import{P as B}from"./pumpDataComplete-A26PerGF.js";import"./azureAI.service--vi5Elg4.js";import"./medicalCorrections.service-DDTgANcC.js";import"./resolveDefaultsModeConfig-R7vZuTP0.js";const y=[{dimension:"Tubing Preference",question:"You're about to head out for a workout or swim. Which setup sounds best?",options:[{label:"I don't want to remove or disconnect anything — I want it to just stay on and work.",score:3},{label:"I'm okay quickly detaching something or tucking it away.",score:1},{label:"Either is fine depending on the day — I’m flexible.",score:2}]},{dimension:"Tubing Preference",question:"When you're getting dressed or wearing tighter clothes...",options:[{label:"I want my device completely hidden and wire-free.",score:3},{label:"A little tubing is fine; I don’t mind managing it.",score:1},{label:"I’m okay either way; comfort matters more than style.",score:2}]},{dimension:"Control Preference",question:"How do you prefer to make adjustments (bolus, temp targets, etc.)?",options:[{label:"I want a phone app to do almost everything quickly.",score:3},{label:"I prefer using the pump device itself.",score:1},{label:"I want both options available.",score:2}]},{dimension:"Control Preference",question:"If your phone dies or isn’t with you…",options:[{label:"I still want full control from the pump.",score:1},{label:"I’m fine losing app control if the pump can maintain automation.",score:2},{label:"I mostly care about the app; I rarely touch the pump.",score:3}]},{dimension:"Target Adjustability",question:"How specific do you want to be with glucose targets?",options:[{label:"Very specific; I want to set exact targets.",score:3},{label:"I’m fine with a reasonable default target.",score:1},{label:"A mix: default most days, tweak when needed.",score:2}]},{dimension:"App Control",question:"Using your phone for daily pump tasks…",options:[{label:"Essential — I want a great app and do most things there.",score:3},{label:"Nice to have — basic things on app are enough.",score:2},{label:"Not important — I prefer the pump hardware.",score:1}]},{dimension:"Carb Counting",question:"Carb entry for meals…",options:[{label:"I want to enter precise carbs and fine tune.",score:3},{label:"I’d rather keep it simple or use presets.",score:1},{label:"I can do either depending on the situation.",score:2}]},{dimension:"Automation Trust",question:"How much do you trust closed-loop automation?",options:[{label:"A lot — I want it handling most of the work.",score:3},{label:"Some — I want to oversee and step in often.",score:2},{label:"Little — I prefer manual control.",score:1}]},{dimension:"Exercise Mode",question:"During exercise, what’s most important?",options:[{label:"Smart, automatic adjustments with minimal fiddling.",score:3},{label:"Simple manual options to raise targets/lessen insulin.",score:2},{label:"I’ll manage it manually; don’t need special modes.",score:1}]},{dimension:"Visibility",question:"On-body visibility:",options:[{label:"I want low-profile and discreet.",score:3},{label:"Doesn’t matter to me.",score:2},{label:"I’m fine with a visible device/tube.",score:1}]},{dimension:"Clinic Support",question:"Training & clinic familiarity:",options:[{label:"I want widely supported options my clinic knows well.",score:3},{label:"I don’t mind newer options if they fit me better.",score:2},{label:"I’m happy to self-learn with minimal clinic help.",score:1}]}];class J{calculateComfortScore(i,t){let s=0;return t.tubingPreference&&(t.tubingPreference===3&&i.dimensions.tubing.type==="tubeless"?s+=30:t.tubingPreference===2&&i.dimensions.tubing.type==="short-tube"?s+=25:t.tubingPreference===1&&i.dimensions.tubing.type==="tubed"&&(s+=20)),t.visibility===3&&i.dimensions.discretion.visibility==="low"&&(s+=20),t.activityLevel==="very_active"&&i.dimensions.waterResistance.submersible&&(s+=15),i.dimensions.battery.type==="pod-integrated"?s+=15:i.dimensions.battery.type==="rechargeable"&&(s+=10),(i.dimensions.discretion.size==="compact"||i.dimensions.discretion.size==="small")&&(s+=10),i.dimensions.interface.type==="touchscreen"&&(s+=10),Math.min(100,s)}calculateAlgorithmScore(i,t){let s=0;return t.automationTrust===3&&(i.dimensions.algorithm.aggressiveness==="aggressive"?s+=30:i.dimensions.algorithm.aggressiveness==="moderate"&&(s+=20)),s+=15,t.targetAdjustability===3&&i.dimensions.targetAdjustability.customizable&&(s+=20),t.exerciseMode===3&&i.dimensions.exerciseMode.available&&(s+=15),t.carbCounting===1&&i.dimensions.bolusWorkflow.carbCounting==="not-required"?s+=20:t.carbCounting===3&&i.dimensions.bolusWorkflow.carbCounting!=="not-required"&&(s+=15),Math.min(100,s)}calculateCostScore(i,t){let s=0;return i.dimensions.cost.coverage==="pharmacy"?s+=30:i.dimensions.cost.coverage==="both"?s+=25:s+=15,i.dimensions.cost.financialAssistance&&(s+=25),i.dimensions.tubing.type==="tubeless"&&(s+=10),(i.dimensions.battery.type==="rechargeable"||i.dimensions.battery.type==="pod-integrated")&&(s+=15),i.name==="Omnipod 5"&&(s+=10),i.dimensions.travel.loanerProgram&&(s+=10),Math.min(100,s)}calculateEaseOfSetupScore(i,t){let s=0;return i.dimensions.interface.type==="touchscreen"?s+=20:i.dimensions.interface.type==="phone-only"&&(t.techComfort&&t.techComfort>=7?s+=25:s+=10),t.cgmUsage&&i.dimensions.cgmCompatibility.compatible.includes(t.cgmUsage)&&(s+=25),i.dimensions.bolusWorkflow.carbCounting==="not-required"&&(s+=20),(i.dimensions.clinicSupport.established==="large"||i.dimensions.clinicSupport.established==="broad")&&(s+=20),i.dimensions.updates.automatic&&(s+=15),Math.min(100,s)}calculateSupportScore(i,t){let s=0;return i.dimensions.clinicSupport.established==="large"||i.dimensions.clinicSupport.established==="broad"?s+=30:i.dimensions.clinicSupport.established==="growing"&&(s+=15),i.dimensions.pediatric.remoteMonitoring&&(s+=20),i.name==="Beta Bionics iLet"&&(s+=15),i.dimensions.dataSharing.platform&&(s+=15),i.dimensions.reliability.occlusionDetection&&(s+=10),i.dimensions.ecosystem.integrations.length>1&&(s+=10),Math.min(100,s)}getCategoryRecommendation(i,t){const s=B.map(r=>{let c;switch(i){case"comfort":c=this.calculateComfortScore(r,t);break;case"algorithm":c=this.calculateAlgorithmScore(r,t);break;case"cost":c=this.calculateCostScore(r,t);break;case"easeOfSetup":c=this.calculateEaseOfSetupScore(r,t);break;case"ongoingSupport":c=this.calculateSupportScore(r,t);break}return{pump:r,score:c}});s.sort((r,c)=>c.score-r.score);const p=s[0],g=this.generateCategoryReasoning(i,p.pump,t),a=this.generateKeyPoints(i,p.pump);return{category:this.getCategoryTitle(i),pump:p.pump,score:p.score,reasoning:g,keyPoints:a}}getCategoryTitle(i){return{comfort:"Daily Comfort & Wearability",algorithm:"Algorithm Performance & Control",cost:"Cost-Effectiveness & Coverage",easeOfSetup:"Ease of Getting Started",ongoingSupport:"Ongoing Support & Management"}[i]||i}generateCategoryReasoning(i,t,s){switch(i){case"comfort":return`The ${t.name} offers the best comfort for your lifestyle. ${t.dimensions.tubing.type==="tubeless"?"Its tubeless design means no tubing to manage during daily activities.":t.dimensions.tubing.type==="short-tube"?"Its short-tube design minimizes tubing management while maintaining flexibility.":"Its traditional tubing provides reliable insulin delivery with familiar wear options."} ${t.dimensions.discretion.details}`;case"algorithm":return`The ${t.name} provides ${t.dimensions.algorithm.aggressiveness} algorithm performance with ${t.dimensions.algorithm.type}. ${t.dimensions.algorithm.details} This pump adjusts insulin ${t.dimensions.algorithm.adjustmentFrequency.toLowerCase()}, ${t.dimensions.bolusWorkflow.carbCounting==="not-required"?"and uniquely does not require carb counting.":"with flexible carb counting options."}`;case"cost":return`The ${t.name} offers excellent value through ${t.dimensions.cost.coverage} coverage. ${t.dimensions.cost.financialAssistance?`Financial assistance available: ${t.dimensions.cost.financialAssistance}. `:""}${t.dimensions.cost.details}`;case"easeOfSetup":return`The ${t.name} is one of the easiest to start with. ${t.dimensions.clinicSupport.established==="large"||t.dimensions.clinicSupport.established==="broad"?"Most clinics are very familiar with this system. ":""}${t.dimensions.interface.details} ${t.dimensions.bolusWorkflow.carbCounting==="not-required"?"No carb counting required makes it especially simple to learn.":""}`;case"ongoingSupport":return`The ${t.name} requires ${t.name==="Beta Bionics iLet"?"minimal ongoing management with only 4 essential alerts and no carb counting.":t.name==="Omnipod 5"?"simple pod changes every 3 days with no other maintenance.":`standard pump maintenance with ${t.dimensions.clinicSupport.details.toLowerCase()}.`} ${t.dimensions.dataSharing.details}`;default:return""}}generateKeyPoints(i,t){const s=[];switch(i){case"comfort":s.push(`${t.dimensions.tubing.type} design`),t.dimensions.waterResistance.submersible&&s.push(`Waterproof to ${t.dimensions.waterResistance.depth}`),s.push(t.dimensions.battery.details),t.dimensions.discretion.details&&s.push(t.dimensions.discretion.details);break;case"algorithm":s.push(`${t.dimensions.algorithm.type} algorithm`),s.push(`Adjusts ${t.dimensions.algorithm.adjustmentFrequency.toLowerCase()}`),t.dimensions.targetAdjustability.customizable&&s.push("Customizable glucose targets"),t.dimensions.exerciseMode.available&&s.push(`Exercise mode: ${t.dimensions.exerciseMode.targetRange||t.dimensions.exerciseMode.type}`);break;case"cost":s.push(`${t.dimensions.cost.coverage} coverage`),t.dimensions.cost.financialAssistance&&s.push(t.dimensions.cost.financialAssistance),(t.dimensions.battery.type==="rechargeable"||t.dimensions.battery.type==="pod-integrated")&&s.push("No battery costs");break;case"easeOfSetup":s.push(`${t.dimensions.interface.type} interface`),s.push(`${t.dimensions.clinicSupport.established} clinic support`),t.dimensions.cgmCompatibility.compatible.length>0&&s.push(`Works with ${t.dimensions.cgmCompatibility.compatible.join(", ")}`);break;case"ongoingSupport":t.dimensions.pediatric.remoteMonitoring&&s.push("Remote monitoring available"),s.push(t.dimensions.updates.details),t.dimensions.alerts.customizable?s.push("Customizable alerts"):t.name==="Beta Bionics iLet"&&s.push("Only 4 essential alerts");break}return s}async generateComprehensiveRecommendations(i){const t=this.getCategoryRecommendation("comfort",i),s=this.getCategoryRecommendation("algorithm",i),p=this.getCategoryRecommendation("cost",i),g=this.getCategoryRecommendation("easeOfSetup",i),a=this.getCategoryRecommendation("ongoingSupport",i),r=B.map(h=>{const S=this.calculateComfortScore(h,i)*.25+this.calculateAlgorithmScore(h,i)*.3+this.calculateCostScore(h,i)*.15+this.calculateEaseOfSetupScore(h,i)*.15+this.calculateSupportScore(h,i)*.15;return{pump:h,score:S}});r.sort((h,S)=>S.score-h.score);const c={category:"Overall Best Match",pump:r[0].pump,score:Math.round(r[0].score),reasoning:`Considering all factors, the ${r[0].pump.name} is your best overall match. It balances your preferences across comfort, algorithm performance, cost, ease of setup, and ongoing support needs.`,keyPoints:[`Best overall score: ${Math.round(r[0].score)}%`,`Top choice in ${this.countTopCategories(r[0].pump,[t,s,p,g,a])} categories`,"Balances all your priorities effectively"]},N=await this.generateAISummary(i,{comfort:t,algorithm:s,cost:p,easeOfSetup:g,ongoingSupport:a,overallTop:c}),$=this.generateConversationStarters(c.pump,i);return{comfort:t,algorithm:s,cost:p,easeOfSetup:g,ongoingSupport:a,overallTop:c,summary:N,conversationStarters:$}}countTopCategories(i,t){return t.filter(s=>s.pump.name===i.name).length}async generateAISummary(i,t){const s=t.overallTop.pump.name,p=t.comfort.pump.name,g=t.algorithm.pump.name;let a=`Based on your preferences and lifestyle, here's your personalized pump analysis:

`;return s===p&&s===g?a+=`**Clear Winner:** The ${s} excels across multiple categories and is your best choice for both daily comfort and diabetes management.

`:(a+=`**Your Best Options:**
`,a+=`• **For daily comfort:** ${p} - ${t.comfort.pump.dimensions.tubing.type} design
`,a+=`• **For best control:** ${g} - ${t.algorithm.pump.dimensions.algorithm.type}
`,a+=`• **Overall best match:** ${s}

`),a+=`**Key Insights:**
`,i.automationTrust===3&&(a+=`• You trust automation, making advanced algorithms a priority
`),i.tubingPreference===3&&(a+=`• Tubeless or minimal tubing is important for your lifestyle
`),i.carbCounting===1&&(a+=`• Simplified meal management without carb counting would benefit you
`),a}generateConversationStarters(i,t){const s=[];return s.push(`Tell me more about ${i.name}'s ${i.dimensions.algorithm.type} algorithm`),i.dimensions.tubing.type==="tubeless"?s.push("How do I manage pod changes and placement sites?"):s.push("What are my infusion set options?"),(t.activityLevel==="active"||t.activityLevel==="very_active")&&s.push("How does this pump handle exercise and sports?"),s.push("What training and support is available in my area?"),s.push("Can you compare insurance coverage options?"),s}}const X=new J;function oe(){const R=_(),[i,t]=u.useState(elevenLabsService.getVoice()),[s,p]=u.useState(elevenLabsService.getApiKey()||""),[g,a]=u.useState(!1),[r,c]=u.useState(""),[N,$]=u.useState(""),[h,S]=u.useState(null),[T,I]=u.useState(!1),[q,V]=u.useState(!1),[O,M]=u.useState("questionnaire"),[b,C]=u.useState(0),[x,k]=u.useState({}),[m,W]=u.useState(null),[P,A]=u.useState(!1),[f,w]=u.useState("overall");u.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const o=window.webkitSpeechRecognition||window.SpeechRecognition,n=new o;n.continuous=!0,n.interimResults=!0,n.lang="en-US",n.onresult=l=>{let d="";for(let v=l.resultIndex;v<l.results.length;v++)l.results[v].isFinal&&(d+=l.results[v][0].transcript+" ");d&&c(v=>v+d)},n.onerror=l=>{G("SimranPumpLLM","Error message",{}),a(!1),elevenLabsService.speak("Speech recognition error. Please try again.")},n.onend=()=>{a(!1)},S(n)}return()=>{h&&h.stop(),elevenLabsService.stop()}},[]);const Q=()=>{if(!h){elevenLabsService.speak("Speech recognition not supported in this browser");return}g?(h.stop(),a(!1),elevenLabsService.speak("Recording stopped")):(h.start(),a(!0),elevenLabsService.speak("Listening. Please speak your question."))},D=async()=>{if(r.trim()){if(I(!0),O==="questionnaire"&&!P)z(r);else{const o=`Based on your symptoms, I recommend monitoring your glucose levels closely. 
      The pump settings appear to be within normal range, but you may want to consider adjusting your basal rate 
      during the evening hours. Please consult with your endocrinologist for personalized adjustments.`;$(o),await elevenLabsService.speak(o)}I(!1)}},z=async o=>{const n=y[b],l=o.toLowerCase();let d=null;if(l.includes("first")||l.includes("1")?d=0:l.includes("second")||l.includes("2")?d=1:(l.includes("third")||l.includes("3"))&&(d=2),d!==null&&n.options[d]){const v=n.options[d].score;k(j=>({...j,[n.dimension]:v})),b<y.length-1?(C(j=>j+1),await L(b+1)):E()}else await elevenLabsService.speak("I didn't understand your answer. Please say 'first', 'second', or 'third' to select an option.")},L=async o=>{const n=y[o],l=`Question ${o+1} of ${y.length}: ${n.question}

`,d=n.options.map((j,Y)=>`Option ${Y+1}: ${j.label}`).join(`

`),v=l+d+`

Please say first, second, or third to choose.`;await elevenLabsService.speak(v)},E=async()=>{const o={tubingPreference:x["Tubing Preference"],controlPreference:x["Control Preference"],targetAdjustability:x["Target Adjustability"],appControl:x["App Control"],carbCounting:x["Carb Counting"],automationTrust:x["Automation Trust"],exerciseMode:x["Exercise Mode"],visibility:x.Visibility,clinicSupport:x["Clinic Support"],techComfort:x["Control Preference"]===3?8:5,activityLevel:x["Exercise Mode"]===3?"active":"moderate",travelFrequency:"occasional",insurance:"good",cgmUsage:"Dexcom G6",priorityFactors:["comfort","algorithm","cost"]},n=await X.generateComprehensiveRecommendations(o);W(n),A(!0);const l=`I've analyzed your preferences across 5 key categories. 
      For daily comfort, I recommend the ${n.comfort.pump.name}.
      For algorithm performance, the ${n.algorithm.pump.name} excels.
      For cost-effectiveness, consider the ${n.cost.pump.name}.
      For ease of setup, the ${n.easeOfSetup.pump.name} is ideal.
      For ongoing support, the ${n.ongoingSupport.pump.name} stands out.
      Overall, your best match is the ${n.overallTop.pump.name}.
      Let me show you the detailed analysis.`;await elevenLabsService.speak(l)},F=async()=>{M("questionnaire"),C(0),k({}),A(!1),await elevenLabsService.speak("Let's find the perfect insulin pump for you. I'll ask you some questions about your preferences and lifestyle."),await L(0)},H=o=>{t(o),elevenLabsService.setVoice(o)},U=()=>{elevenLabsService.testVoice(i)},K=()=>{elevenLabsService.stop(),I(!1)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>R("/doctor"),className:"text-gray-600 hover:text-gray-900",children:"← Back"}),e.jsx("h1",{className:"text-xl font-bold text-purple-800",children:"Simran PumpLLM Assistant"})]}),e.jsx("button",{onClick:()=>V(!q),className:"px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"⚙️ Voice Settings"})]})})}),q&&e.jsx("div",{className:"bg-white shadow-lg border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Selection"}),e.jsx("select",{value:i,onChange:o=>H(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:ELEVENLABS_VOICES.map(o=>e.jsxs("option",{value:o.id,children:[o.name," - ",o.description]},o.id))}),e.jsx("button",{onClick:U,className:"mt-2 px-4 py-2 text-sm bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200",children:"🔊 Test Voice"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ElevenLabs API Status"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-green-50 border border-green-300 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"✓ API Key Configured (Enterprise HIPAA-Compliant)"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Using high-quality neural voices with ultra-low latency"})]}),!s&&e.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"Note: If API key is not detected, browser voice will be used as fallback"})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-400 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"🤖"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"AI Pump Selection & Management Assistant"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"I'll help you find the perfect insulin pump based on 23 dimensions of compatibility"})]}),e.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[e.jsx("button",{onClick:Q,className:`px-8 py-4 rounded-full font-medium transition-all transform hover:scale-105 ${g?"bg-red-500 text-white shadow-lg animate-pulse":"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-lg"}`,children:g?"⏹ Stop Recording":"🎤 Start Conversation"}),T&&e.jsx("button",{onClick:K,className:"px-8 py-4 bg-gray-600 text-white rounded-full hover:bg-gray-700",children:"🔇 Stop Speaking"})]}),(g||T)&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-4",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-sm text-gray-600",children:g?"Listening...":"Speaking..."})]})]}),r&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"👤"})," Your Question"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800",children:r})}),e.jsxs("div",{className:"mt-4 flex space-x-4",children:[e.jsx("button",{onClick:D,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg hover:shadow-lg transition",children:"Get AI Response"}),e.jsx("button",{onClick:()=>c(""),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Clear"})]})]}),N&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center text-purple-800",children:[e.jsx("span",{className:"mr-2",children:"🤖"})," AI Assistant Response"]}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 leading-relaxed",children:N})})]}),O==="questionnaire"&&!P&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pump Selection Questionnaire"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Question ",b+1," of ",y.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all",style:{width:`${(b+1)/y.length*100}%`}})})]}),y[b]&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl mb-4 text-gray-800",children:y[b].question}),e.jsx("div",{className:"space-y-3",children:y[b].options.map((o,n)=>e.jsxs("button",{onClick:()=>{const l=y[b];k(d=>({...d,[l.dimension]:o.score})),b<y.length-1?(C(d=>d+1),L(b+1)):E()},className:"w-full text-left p-4 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-500 transition",children:[e.jsxs("span",{className:"font-medium",children:["Option ",n+1,":"]})," ",o.label]},n))})]})]}),P&&m&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6 text-purple-800",children:"Your Comprehensive Pump Analysis"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 border-b",children:[e.jsx("button",{onClick:()=>w("overall"),className:`px-4 py-2 font-medium transition ${f==="overall"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Overall Best"}),e.jsx("button",{onClick:()=>w("comfort"),className:`px-4 py-2 font-medium transition ${f==="comfort"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Comfort"}),e.jsx("button",{onClick:()=>w("algorithm"),className:`px-4 py-2 font-medium transition ${f==="algorithm"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Algorithm"}),e.jsx("button",{onClick:()=>w("cost"),className:`px-4 py-2 font-medium transition ${f==="cost"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Cost"}),e.jsx("button",{onClick:()=>w("easeOfSetup"),className:`px-4 py-2 font-medium transition ${f==="easeOfSetup"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Setup"}),e.jsx("button",{onClick:()=>w("ongoingSupport"),className:`px-4 py-2 font-medium transition ${f==="ongoingSupport"?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:"Support"})]}),e.jsx("div",{className:"mb-6",children:(()=>{const o=f==="overall"?m.overallTop:f==="comfort"?m.comfort:f==="algorithm"?m.algorithm:f==="cost"?m.cost:f==="easeOfSetup"?m.easeOfSetup:m.ongoingSupport;return e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-purple-800",children:o.pump.name}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:o.category})]}),e.jsxs("span",{className:"px-4 py-2 bg-purple-600 text-white rounded-full font-bold",children:[o.score,"% Match"]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:o.reasoning}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Key Points:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:o.keyPoints.map((n,l)=>e.jsx("li",{children:n},l))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Pump Details:"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["• Manufacturer: ",o.pump.manufacturer]}),e.jsxs("p",{children:["• Type: ",o.pump.dimensions.tubing.type]}),e.jsxs("p",{children:["• Algorithm: ",o.pump.dimensions.algorithm.type]}),e.jsxs("p",{children:["• Phone Control:"," ",o.pump.dimensions.phoneControl.bolusFromPhone?"Yes":"View Only"]})]})]})]}),e.jsx("button",{onClick:async()=>{const n=`Let me tell you more about the ${o.pump.name} for ${o.category}. ${o.reasoning} ${o.keyPoints.join(". ")}`;await elevenLabsService.speak(n)},className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"🔊 Hear Details"})]})})()}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Summary:"}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:m.summary})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Questions to explore:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.conversationStarters.map((o,n)=>e.jsx("button",{onClick:async()=>{c(o),await elevenLabsService.speak(`You asked: ${o}. Let me help you with that.`)},className:"px-3 py-1 bg-white border border-purple-300 rounded-full text-sm hover:bg-purple-50",children:o},n))})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-4",children:[e.jsx("button",{onClick:()=>{A(!1),C(0),k({}),F()},className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retake Questionnaire"}),e.jsx("button",{onClick:()=>M("chat"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Continue Conversation"}),e.jsx("button",{onClick:async()=>{const o=`Here's your complete pump analysis. 
                    For comfort: ${m.comfort.pump.name}. 
                    For algorithm: ${m.algorithm.pump.name}. 
                    For cost: ${m.cost.pump.name}. 
                    For setup: ${m.easeOfSetup.pump.name}. 
                    For support: ${m.ongoingSupport.pump.name}. 
                    Overall best: ${m.overallTop.pump.name}.`;await elevenLabsService.speak(o)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"🔊 Hear Full Summary"})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:F,className:"p-4 bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg shadow hover:shadow-lg transition text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"🎯"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Start Pump Selection"})]}),e.jsxs("button",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"⚙️"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Pump Settings"})]}),e.jsxs("button",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"💉"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Bolus Calculator"})]}),e.jsxs("button",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:"📱"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Contact Doctor"})]})]})]})]})}export{oe as default};
//# sourceMappingURL=SimranPumpLLM-CwLmCNSx.js.map
