{"version":3,"file":"PrintProcessedNote-oIuLF_jg.js","sources":["../../src/pages/PrintProcessedNote.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Printer, Download, Mail, ArrowLeft } from 'lucide-react';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nexport default function PrintProcessedNote() {\n  const { visitId } = useParams();\n  const navigate = useNavigate();\n  const [noteContent, setNoteContent] = useState('');\n  const [visitData, setVisitData] = useState<any>(null);\n  const [includeLetterhead, setIncludeLetterhead] = useState(true);\n\n  useEffect(() => {\n    // Get the saved visit data\n    const lastVisitId = visitId || localStorage.getItem('last-visit');\n    if (lastVisitId) {\n      const saved = localStorage.getItem(lastVisitId);\n      if (saved) {\n        const data = JSON.parse(saved);\n        setVisitData(data);\n        setNoteContent(data.note || '');\n      }\n    }\n  }, [visitId]);\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const handleDownloadPDF = () => {\n    // Create a blob from the content\n    const blob = new Blob([noteContent], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `clinical-note-${new Date().toISOString().split('T')[0]}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleEmail = () => {\n    const subject = encodeURIComponent('Clinical Note');\n    const body = encodeURIComponent(noteContent);\n    window.location.href = `mailto:?subject=${subject}&body=${body}`;\n  };\n\n  if (!noteContent) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600 mb-4\">No processed note found</p>\n          <button\n            onClick={() => navigate(-1)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Control Panel - Hidden in print */}\n      <div className=\"print:hidden bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-4\">\n              <button onClick={() => navigate(-1)} className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <ArrowLeft className=\"h-5 w-5\" />\n              </button>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Print Clinical Note</h1>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={includeLetterhead}\n                  onChange={e => setIncludeLetterhead(e.target.checked)}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm\">Include Letterhead</span>\n              </label>\n\n              <button\n                onClick={handlePrint}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2\"\n              >\n                <Printer className=\"h-5 w-5\" />\n                Print\n              </button>\n\n              <button\n                onClick={handleDownloadPDF}\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2\"\n              >\n                <Download className=\"h-5 w-5\" />\n                Download\n              </button>\n\n              <button\n                onClick={handleEmail}\n                className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2\"\n              >\n                <Mail className=\"h-5 w-5\" />\n                Email\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Printable Content */}\n      <div className=\"max-w-4xl mx-auto p-8 bg-white print:p-0\">\n        {/* Letterhead */}\n        {includeLetterhead && (\n          <div className=\"mb-8 pb-4 border-b-2 border-gray-300 print:mb-6\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h1 className=\"text-2xl font-bold text-blue-600\">TSHLA Medical Center</h1>\n                <p className=\"text-gray-600\">123 Medical Plaza, Suite 100</p>\n                <p className=\"text-gray-600\">San Francisco, CA 94105</p>\n                <p className=\"text-gray-600\">Phone: (415) 555-0100 | Fax: (415) 555-0101</p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm text-gray-500\">NPI: 1234567890</p>\n                <p className=\"text-sm text-gray-500\">Tax ID: 12-3456789</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Note Content */}\n        <div className=\"prose max-w-none\">\n          <pre className=\"whitespace-pre-wrap font-sans text-sm leading-relaxed text-gray-800\">\n            {noteContent}\n          </pre>\n        </div>\n\n        {/* Signature Section */}\n        <div className=\"mt-12 pt-6 border-t border-gray-300 print:mt-8\">\n          <div className=\"grid grid-cols-2 gap-8\">\n            <div>\n              <div className=\"mb-8\">\n                <p className=\"text-sm text-gray-600 mb-1\">Provider Signature</p>\n                <div className=\"border-b border-gray-400 h-12\"></div>\n                <p className=\"text-sm mt-1\">Dr. _____________________</p>\n                <p className=\"text-sm text-gray-600\">Date: {new Date().toLocaleDateString()}</p>\n              </div>\n            </div>\n            <div>\n              <div className=\"mb-8\">\n                <p className=\"text-sm text-gray-600 mb-1\">Reviewed By</p>\n                <div className=\"border-b border-gray-400 h-12\"></div>\n                <p className=\"text-sm mt-1\">_____________________</p>\n                <p className=\"text-sm text-gray-600\">Date: _____________________</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"mt-8 pt-4 border-t border-gray-200 text-center text-xs text-gray-500 print:mt-4\">\n          <p>This document contains confidential medical information protected under HIPAA.</p>\n          <p>Generated on {new Date().toLocaleString()}</p>\n          {visitData && (\n            <p>\n              Template: {visitData.templateName || 'N/A'} | Specialty:{' '}\n              {visitData.specialty || 'N/A'}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Print Styles */}\n      <style jsx>{`\n        @media print {\n          @page {\n            size: letter;\n            margin: 0.5in;\n          }\n\n          body {\n            print-color-adjust: exact;\n            -webkit-print-color-adjust: exact;\n          }\n        }\n      `}</style>\n    </div>\n  );\n}\n"],"names":["PrintProcessedNote","visitId","useParams","navigate","useNavigate","noteContent","setNoteContent","useState","visitData","setVisitData","includeLetterhead","setIncludeLetterhead","useEffect","lastVisitId","saved","data","handlePrint","handleDownloadPDF","blob","url","a","handleEmail","subject","body","jsxs","jsx","ArrowLeft","e","Printer","Download","Mail"],"mappings":"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"}