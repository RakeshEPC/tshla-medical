import{u as b,r as d,e as y,l as w,b as m,j as e,C as v}from"./index-CFDQeSWK.js";import{d as l,g as h}from"./doctorProfile.service-CDoI-bQ3.js";import{A as T}from"./arrow-left-y79zHQa3.js";import{P as C}from"./plus-CCtFtFjr.js";import{F as x}from"./file-text-BgtFFhuX.js";import{S as D}from"./star-DalA3XQd.js";import{P as p}from"./pen-0iPx3Ja6.js";import{C as S}from"./copy-DJ5GCJJO.js";import{T as P}from"./trash-2-BzPF_GgF.js";function R(){const n=b(),[r,o]=d.useState([]),[g,u]=d.useState(!0),a=y.getCurrentUser()?.name||"Dr. Smith";d.useEffect(()=>{i()},[]);const i=async()=>{try{l.initialize(a.id);const s=await l.getTemplates();if(s.length===0){w("TemplateList","Debug message",{});const t=h(a.id);for(const f of t)await l.createTemplate(f,a.id);const c=await l.getTemplates();o(c)}else o(s)}catch{m("TemplateList","Error message",{})}finally{u(!1)}},j=async s=>{if(confirm("Are you sure you want to delete this template?"))try{await l.deleteTemplate(s,a?.id),await i()}catch{m("TemplateList","Error message",{})}},N=async s=>{const t=prompt("Enter name for the duplicate:",`${s.name} (Copy)`);if(t)try{await l.duplicateTemplate(s.id,t,a?.id),await i()}catch{m("TemplateList","Error message",{})}};return g?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading templates..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>n(-1),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Template Library"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>n("/doctor-templates"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Create Template"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Templates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),e.jsx(x,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Standard Templates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(s=>s.name.includes("SOAP")||s.name.includes("Diabetes")||s.name.includes("Progress")||s.name.includes("Telehealth")||s.name.includes("New Patient")).length})]}),e.jsx(D,{className:"h-8 w-8 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Custom Templates"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(s=>!s.name.includes("SOAP")&&!s.name.includes("Diabetes")&&!s.name.includes("Progress")&&!s.name.includes("Telehealth")&&!s.name.includes("New Patient")).length})]}),e.jsx(p,{className:"h-8 w-8 text-green-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Templates"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:r.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(x,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No templates found"}),e.jsx("button",{onClick:async()=>{{const s=h(a.id);for(const t of s)await l.createTemplate(t,a.id);await i()}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Load Standard Templates"})]}):r.map(s=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.name}),s.isDefault&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:"Default"})]}),s.description&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-3 w-3"}),s.visitType||"General"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),s.usageCount||0," uses"]}),e.jsxs("span",{children:[Object.keys(s.sections||{}).length," sections"]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Sections:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(s.sections||{}).slice(0,5).map(([t,c])=>e.jsx("span",{className:"px-2 py-1 text-xs bg-white rounded border border-gray-200",children:c.title},t)),Object.keys(s.sections||{}).length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",Object.keys(s.sections).length-5," more"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>n(`/doctor-templates?edit=${s.id}`),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Edit template",children:e.jsx(p,{className:"h-4 w-4 text-gray-600"})}),e.jsx("button",{onClick:()=>N(s),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Duplicate template",children:e.jsx(S,{className:"h-4 w-4 text-gray-600"})}),e.jsx("button",{onClick:()=>j(s.id),className:"p-2 hover:bg-gray-100 rounded-lg",title:"Delete template",children:e.jsx(P,{className:"h-4 w-4 text-red-600"})})]})]})},s.id))})]})]})]})}export{R as default};
//# sourceMappingURL=TemplateList-CdeeKPC9.js.map
