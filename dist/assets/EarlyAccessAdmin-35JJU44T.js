import{r as i,l as f,j as e,R as A}from"./index-JAW6HvUl.js";const v=()=>{const[l,h]=i.useState([]),[d,b]=i.useState(null),[p,g]=i.useState(!0),[r,x]=i.useState("both");i.useEffect(()=>{y()},[]);const y=async()=>{g(!0);const t=[],a="https://tshla-schedule-api-container.redpebble-e4551b7a.eastus.azurecontainerapps.io";try{const c=localStorage.getItem("authToken");if(c){const s=await fetch(`${a}/api/early-access`,{headers:{Authorization:`Bearer ${c}`}});if(s.ok){const n=await s.json();t.push(...n),x("backend")}}}catch{f("EarlyAccessAdmin","Debug message",{})}const m=JSON.parse(localStorage.getItem("earlyAccessApplications")||"[]"),o=[...t,...m].filter((c,s,n)=>s===n.findIndex(N=>N.email===c.email));h(o),o.length>t.length&&t.length>0?x("both"):t.length===0&&x("localStorage"),g(!1)},j=()=>{const t=["Name","Email","Title","Specialty","Applications","Why Interested","Submitted At","Source"],a=l.map(s=>[s.name,s.email,s.title,s.specialty,s.applications,s.whyInterested.replace(/,/g,";"),s.submittedAt,s.source]),m=[t.join(","),...a.map(s=>s.map(n=>`"${n}"`).join(","))].join(`
`),u=new Blob([m],{type:"text/csv"}),o=window.URL.createObjectURL(u),c=document.createElement("a");c.href=o,c.download=`early-access-applications-${new Date().toISOString().split("T")[0]}.csv`,c.click()},w=()=>{window.confirm("Are you sure you want to clear all applications? This cannot be undone.")&&(localStorage.removeItem("earlyAccessApplications"),h([]))};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Early Access Applications"}),!p&&l.length>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Data source:"," ",r==="backend"?"üåê Backend Database":r==="localStorage"?"üíæ Local Storage":"üîÑ Backend + Local Storage","(",l.length," applications)"]})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",disabled:l.length===0,children:"Export to CSV"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",disabled:l.length===0,children:"Clear All"})]})]}),p?e.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Loading applications..."})}):l.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No applications yet. Share your landing page to start collecting submissions!"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Applications will appear here when submitted through the form."})]}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applications"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((t,a)=>e.jsxs(A.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.title}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:t.applications})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.submittedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("button",{onClick:()=>b(d===a?null:a),className:"text-blue-600 hover:text-blue-800",children:[d===a?"Hide":"View"," Details"]})})]}),d===a&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Specialty:"})," ",e.jsx("span",{className:"text-gray-600",children:t.specialty||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Applications Interested In:"})," ",e.jsx("span",{className:"text-gray-600",children:t.applications})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Why Interested:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:t.whyInterested})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Source:"})," ",e.jsx("span",{className:"text-gray-600",children:t.source})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Submitted At:"})," ",e.jsx("span",{className:"text-gray-600",children:new Date(t.submittedAt).toLocaleString()})]})]})})})]},a))})]})}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h2",{className:"text-sm font-semibold text-blue-900 mb-2",children:"üìù Admin Access:"}),e.jsx("p",{className:"text-sm text-blue-700",children:r==="backend"?"Applications are being fetched from the backend database. You are logged in as an admin.":r==="both"?"Showing combined data from backend database and local browser storage.":"Applications shown from browser localStorage. Log in as a doctor to access backend database."}),e.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["Access this admin page at"," ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"/early-access-admin"})]})]})]})})};export{v as default};
//# sourceMappingURL=EarlyAccessAdmin-35JJU44T.js.map
